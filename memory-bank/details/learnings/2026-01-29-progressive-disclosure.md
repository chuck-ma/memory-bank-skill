# Progressive Disclosure 设计理念

<!-- MACHINE_BLOCK_START -->
> 日期: 2026-01-29
> 类型: integration

## 问题
在分析 Memory Bank 索引质量问题时，发现索引无法有效引导 AI 找到相关文件。

## 症状
从 Claude Code Skill 的 reference 设计中获得启发，深入学习了渐进式披露的设计理念。

## 根因

### 核心理念
- **本质**：分层展示信息，避免信息过载，降低认知负担
- **核心问题**：每层放什么？如何让用户/LLM 知道"何时该深入"？

### 每层的职责
| 层级 | 职责 | 回答的问题 |
|------|------|-----------|
| 入口层（Primary） | 最核心、最频繁的信息，快速引导 | "立即需要知道什么" |
| 详情层（Secondary） | 高级、复杂的信息，按需加载 | "完整深度是什么" |

### 与索引设计的关系
- 索引是第一道入口，不一次性显示所有内容
- 从宏观到微观的渐进过程
- 索引披露"有什么"和"在哪里"，用户选择是否深入

### 入口与详情的关系
- 用户主导的披露
- 入口是"简要的承诺"，详情是"完整的兑现"
- 入口是精心策划的"信息门槛"

### Skill reference 设计的体现
- SKILL.md 是入口层（< 500 行，核心概念）
- references/ 是详情层（详细规则）
- **关键**：在入口层用描述性链接说明"何时该读详情"

### 对 Memory Bank 的启示
- `_index.md` 是索引/入口
- 上层索引需要有足够的"触发条件"
- 不是复制内容，而是给出"什么情况下该深入"
- 触发条件 = 关键词 + 示例问题

## 解决方案
索引质量问题的本质是"路由信息不足"。解决方案不是新增检索通路，而是强化索引的路由能力。

## 教训
每层只负责"路由"，告诉读者下一步往哪走。入口层的价值不在于内容本身，而在于能否让读者判断"是否需要深入"。

## Oracle 验证

与 Oracle 讨论后，发现原有理解有过于简化的地方。

### 修正：入口层不只是路由

- **原理解**："每层只负责路由"
- **修正**：入口层除了路由，还必须提供"最小可用解释/约束/例子"来让路由决策可执行且低错误率
- 纯路由不够，读者需要足够的上下文才能做出正确的路由决策

### 遗漏的关键点

| 要点 | 说明 |
|------|------|
| **反触发** | 不仅写"何时读"，也写"何时不读/不用纠结"，降低 LLM 误路由 |
| **一致的决策语法** | 统一模板（如 `If you are… / When…`）比增加内容更重要，保证可扫描、可学习 |
| **兜底机制** | 匹配多个文件时的优先级规则（如"先读 patterns，再读 requirements"） |
| **披露顺序而非隐藏** | 让展开路径可预测、可回退，不是藏起来让人找 |

### 根本目的（第一性原理）

> 最小化"做出下一步正确行动"的信息成本与错误成本。
> 让读者用最少的阅读，最大概率走到正确的细节，走错时能快速纠正。

### 行动建议

1. **补齐链接三要素**：为每个链接补齐触发、产出、反触发
2. **统一触发语法**：用一致的模板保证可扫描、可学习
3. **给入口层兜底路径**：当不确定时，告诉读者默认应该往哪走
<!-- MACHINE_BLOCK_END -->

<!-- USER_BLOCK_START -->
## 补充
<!-- USER_BLOCK_END -->
